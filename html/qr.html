<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assets/css/common.min.css">
</head>
<body>
    <div id="wrap">
        <div class="inner">
            <div class="w_280">
                <div class="qr_box">
                    <img src="../assets/img/QR_Code_example.png" alt="">
                </div>
                <!-- <a href="../assets/img/QR_code_for_mobile_English_Wikipedia.svg" target="_top" class="f_btn ty_big _red w100 mt15"  download="ImageName" title="ImageName">
                    QR코드 다운로드
                </a> -->
                <button type="button" class="f_btn ty_big _red w100 mt15" data-href="../assets/img/QR_Code_example.png" download="qrcode.png" onclick="forceDownload(this)">QR코드 다운로드</button>
            </div>
        </div>
    </div>
    <script>
        ['DOMContentLoaded', 'resize'].forEach(event => window.addEventListener(event, function (ev) {
            const { innerHeight } = window;
            document.documentElement.style.setProperty("--app-height",`${innerHeight}px`);
        }));

        function forceDownload(link){
            var url = link.getAttribute("data-href");
            var fileName = link.getAttribute("download");
            //link.innerText = "Working...";
            var xhr = new XMLHttpRequest();
            xhr.open("GET", url, true);
            xhr.responseType = "blob";
            xhr.onload = function(){
                var urlCreator = window.URL || window.webkitURL;
                var imageUrl = urlCreator.createObjectURL(this.response);
                var tag = document.createElement('a');
                tag.href = imageUrl;
                tag.download = fileName;
                document.body.appendChild(tag);
                tag.click();
                document.body.removeChild(tag);
                link.innerText="QR코드 다운로드 완료";
            }
            xhr.send();
        }
    </script>
</body>
</html>